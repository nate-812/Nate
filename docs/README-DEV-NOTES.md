# 项目开发档案：我们的小窝

## 项目简介
- **项目名称**：我们的小窝
- **技术栈**：Expo + React Native + Firebase (认证+Firestore)
- **目标用户**：情侣
- **UI风格**：可爱、粘土拟物化

## 已实现的核心功能
1. **登录系统**：基于情侣编号（812/917）+情侣密语，支持本地持久化登录。
2. **悄悄话聊天**：自定义聊天界面，支持喊话（主页显示）、已读状态。
3. **纪念日管理**：可添加、展示纪念日，带毛玻璃弹窗。
4. **我们的约定**：正在开发的“100件事”清单，替换原有相册。

## 重要开发历程与技术决策
- 依赖地狱：曾尝试使用gifted-chat等库，因Expo Go兼容性问题，最终自定义实现聊天。
- 权限陷阱：从Firebase匿名认证升级为邮箱/密码认证，彻底解决多设备登录和权限问题。
- UI细节：多次优化SafeAreaView、KeyboardAvoidingView、卡片布局、输入框体验。
- 已读功能：每条消息带isRead字段，进入聊天页自动批量标记为已读，气泡右侧显示“已读”。
- 主页导航：所有功能入口均在HomeScreen的widgets数组中集中配置。
- 未来迁移：已规划将来迁移到腾讯云等国内BaaS，数据结构和功能均易于迁移。

## 代码结构理解
- `App.js`：全局导航与登录状态管理，负责页面切换和用户身份流转。
- `screens/`：所有页面组件，包括HomeScreen、ChatScreen、CalendarScreen、ThingsToDoScreen等。
- `utils/`：工具函数（如微信风格时间戳格式化）。
- `firebaseConfig.js`：Firebase初始化配置。
- 聊天消息结构：每条消息含`_id`、`text`、`createdAt`、`user`、`isRead`。
- 主页widgets：决定首页按钮的显示与跳转目标。

## 未来建议
- “我们的约定”功能可支持添加、勾选、删除、排序、进度统计等。
- 数据安全：敏感信息（如密钥）应通过.env管理并加入.gitignore。
- 迁移时可用脚本导出Firestore数据为JSON，再导入国内云服务。

---

> 本文件为AI助手根据与用户的全部开发对话自动生成，旨在帮助后续开发者快速理解项目全貌与历史。 